\documentclass[conference]{IEEEtran}
\IEEEoverridecommandlockouts
% The preceding line is only needed to identify funding in the first footnote. If that is unneeded, please comment it out.
%\usepackage{cite}
\usepackage{amsmath,amssymb,amsfonts}
\usepackage{tikz}
\usepackage{pdfpages}
\usepackage{pgfplots}
%\usepackage{algorithmic}
%\usepackage{graphicx}
%\usepackage{textcomp}
\def\BibTeX{{\rm B\kern-.05em{\sc i\kern-.025em b}\kern-.08em
    T\kern-.1667em\lower.7ex\hbox{E}\kern-.125emX}}
\newcommand{\MYfooter}{\smash{
\hfil\parbox[t][\height][t]{\textwidth}{\centering
\thepage}\hfil\hbox{}}}

\makeatletter

% normal pages
\def\ps@headings{%
\def\@oddhead{\parbox[t][\height][t]{\textwidth}{\flushleft
2018 International Conference on Applied Smart Systems (ICASS'2018)\\
\textit{24-25 November 2018, Medea, ALGERIA}

\noindent\makebox[\linewidth]
}
%\vspace{0.5cm}
\hfil\hbox{}}%

%\def\@evenhead{\parbox[t][\height][t]{\textwidth}{\flushleft
%14-th IEEE International Conference on Peer-to-Peer Computing\\
%\noindent\makebox[\linewidth]{\rule{\textwidth}{0.4pt}}
%}\hfil\hbox{}}%

\def\@oddfoot{\MYfooter}%
\def\@evenfoot{\MYfooter}}

% title page
\def\ps@IEEEtitlepagestyle{%
\def\@oddhead{\parbox[t][\height][t]{\textwidth}{\flushleft
2018 International Conference on Applied Smart Systems (ICASS'2018)\\
\textit{24-25 November 2018, Medea, ALGERIA}
%\noindent\makebox[\linewidth]{\rule{\textwidth}{0.4pt}}
}\hfil\hbox{}}%
%\def\@evenhead{\scriptsize\thepage \hfil \leftmark\mbox{}}%
\def\@oddfoot{ 978-1-5386-6866-5/18/\$31.00 \textcopyright 2018 IEEE \hfil 
\leftmark\mbox{}}%
\def\@evenfoot{\MYfooter}}

\makeatother
% make changes take effect
\pagestyle{headings}
% adjust as needed
\addtolength{\footskip}{0\baselineskip}
\addtolength{\textheight}{-1\baselineskip}
\begin{document}


\title{\vspace{0.3cm}Optimizing Planet Wars bot using an immune-based algorithm}


\author{\IEEEauthorblockN{Mohamed Amine Chikh Touami}
\IEEEauthorblockA{\textit{Faculty of Exact Sciences} \\
\textit{University Mustapha Stembouli}\\
Mascara, Algeria \\
ma\_chikhtouhami@hotmail.com}
\and
\IEEEauthorblockN{SALEM Mohammed}
\IEEEauthorblockA{\textit{Faculty of Exact Sciences} \\
\textit{University Mustapha Stembouli}\\
Mascara, Algeria \\
salemohammed@gmail.com}
\and
\IEEEauthorblockN{KHELFI Mohammed Faycal}
\IEEEauthorblockA{\textit{RIIR Lab} \\
\textit{University of Oran 1, Ahmed Ben Bella}\\
Oran, Algeria \\
mf\_khelfi@yahoo.fr}
%\and
%\IEEEauthorblockN{4\textsuperscript{th} Given Name Surname}
%\IEEEauthorblockA{\textit{dept. name of organization (of Aff.)} \\
%\textit{name of organization (of Aff.)}\\
%City, Country \\
%email address}
%\and
%\IEEEauthorblockN{5\textsuperscript{th} Given Name Surname}
%\IEEEauthorblockA{\textit{dept. name of organization (of Aff.)} \\
%\textit{name of organization (of Aff.)}\\
%City, Country \\
%email address}
%\and
%\IEEEauthorblockN{6\textsuperscript{th} Given Name Surname}
%\IEEEauthorblockA{\textit{dept. name of organization (of Aff.)} \\
%\textit{name of organization (of Aff.)}\\
%City, Country \\
%email address}
}
%\pagestyle{empty}
\maketitle
\pagenumbering{gobble}
\setlength{\headsep}{0.5in}
\begin{abstract}
This work presents an Artificial immune system algorithm (AIS) for a real-time strategy game: Planet Wars. This game requires the bot to reach some adaptabilities with the aim to beat different enemies in different maps. This Algorithm uses an evolutionary strategy to evolve a set of parameters for an autonomous agent (bot) to achieve some goals in the game. In order to optimize the behavior of the bot, the AIS was applied to tune the set of rules. We have run several experiments in different situations obtaining encouraging results.
\end{abstract}

\begin{IEEEkeywords}
Computational intelligence, real-time strategy games, planet wars, artificial immune system.
\end{IEEEkeywords}

\section{Introduction}
% no \IEEEPARstart
The large entertainment industry sector is the video games. The commercial video games budget is rising every year, it reaches 25.1 billion dollars in 2010\cite{doc2}. Many designers and developers are interested in the community of video games around the world. The main objective of these video games community is to provide amusement to their players. The question is how to do this; there has been no detailed investigation of the full mechanism to put the work in the correct way\cite{doc5}.
In the past, the developers overlooked their games artificial intelligence and focusing their works on high-quality graphics games. Moreover, the human players are able to defeat these games without much effort and lose the interest\cite{doc5}.  

In light of recent events in video games, it is becoming extremely difficult to ignore the existence of one paradigm that is fast becoming a key instrument in most video games, which is the Artificial Intelligence(AI). The AI is an important aspect of the conception of this kind of games. Moreover, it has seen the rapid of development in many fields such as human player imitation, procedural content generation(PCG), automating game testing, opponent modelling, and computational narrative, among others\cite{doc5}.

Recently, researchers have shown an increased interest in developing AI for RTS games. RTS games are a sub-genre of strategy video games, which all the actions made in real-time. The contenders have the capability to control (make a decision) a set of distributed units and structures during the game with the aim of (a) destroy the opponent assets (b)create additional structures to reached some goals in the game or to secure area\cite{doc5,doc1,doc2,doc3,doc4}. At the most of RTS games they employ two levels of AI\cite{doc1}, while can classify these two levels by (a)strategic when it will make a decision over the whole set of units (b) tactical when they decide the behavior of each these small units. In addition, with the real-time aspect challenge, these difficulties are increased. PlanetWar is a real-time strategy game, where contenders presented by autonomous agents play against each other on multiple maps. with the aim of winning the game, the players will generate multiple attacks including a number of starships from their planets against the other planets and use several strategies to defeat the enemy.

One of the hardest tasks in PlanetWar games is the bot's conception. For simulating the other contenders, designers use the bot concept. Bots are intelligent agents interact with human players in order to compete them within any computer-based framework\cite{doc4}. This challenge is made by experts human to design bot's behavior from their life experiences and experimentation in order to increase the game's challenges\cite{doc3}. The intelligence bots have a pivotal role\cite{doc4} in the conception of an RTS games. In addition, for a PlanetWar agent(bot), a set of parameters are required previous the running of the bot, moreover, a good parameter's values are making a better behavior from the bot. So, tuning the parameters previously cited, is wide research area like optimization problems\cite{doc1}. This technic is used to determine which parameters are more important for the bot to tune\cite{doc1}. 

In the other side, around our bot's optimization, we use an artificial immune system algorithm (AIS) to improve the set of parameter. AIS is an evolutionary algorithm which inspires its technics from the biological immune system that used to defend the body against pathogens. In this paper, we aim to design an autonomous bot for the planet war game based on AIS algorithm to improve the set of parameters trying to maximize an objective function formed by the turns played by the bot and its number of wins. 

This paper has been divided into four parts: the first part deals with the description of the planet war game and its rules. The next section is dedicated to present the AIS algorithm. The third section tries to define the proposed approach and the architecture used to develop the bot based on an AI behavior. The remaining part of the paper presents the experimental results.         
% You must have at least 2 lines in the paragraph with the drop letter
% (should never be an issue)


%\hfill mds
 
%\hfill August 26, 2015

\section{Planet War}
In 2010 google choose like a game planet wars for it AI challenge competition. In this pager, we work with a version of Glacon game in order to design a fighter bots. A planet war match\cite{doc1} runs on a map with several distributed planets in different positions, such as each of them has a number describes the quantity of starships its owns. In each turn, the number of starship will change. Each planet is owned by a player, opponent or neutral planet(owned by nobody), moreover, each planet belongs to the player (no neutral one) will increase their number of starships after each step according to their growth rate, this rate explain the additional starship's number will generate each planet in each step.
The main purpose of the planet war game\cite{doc1} is to challenge all players and try to defeat all of them, that mean to destroy all enemy's starships. Planet war is an RTS game by its nature. To achieve a specific objective each player has a limit number of turns to do it and try to win (beat opponent).  \\

\begin{figure}
\begin{tikzpicture}[scale = 0.8]
\draw [fill =gray, ultra thick, gray] (2,1) circle [radius=0.3];
\node at (2,1) {14};
\draw [fill =gray, ultra thick, gray] (3,2) circle [radius=0.4];
\draw [fill = gray ,thick] (3.5,2.8) to (3.7,2.7) to (3.8,3.2) to (3.5,2.8);
\node at (3.5,2.5) {20};
\node at (3,2) {29};
\draw [fill =gray, ultra thick, gray] (4,1) circle [radius=0.3];
\node at (4,1) {45};
\draw [fill =gray ,thick] (3,1.1) to (3,0.9) to (2.7,1) to (3,1.1);
\node at (3.2,1) {12};
\draw [fill =gray, ultra thick, gray] (6,0.3) circle [radius=0.3];
\node at (6,0.3) {12};
\draw [fill =gray, ultra thick, gray] (8.5,1.5) circle [radius=0.6];
\node at (8.5,1.5) {33};
\draw [fill = gray ,thick] (7.3,1.6) to (6.9,1.5) to (7.3,1.4) to (7.3,1.6);
\node at (7.6,1.5) {10};
\draw [fill =gray, ultra thick, gray] (8,3.5) circle [radius=0.3];
\node at (8,3.5) {18};
\draw [fill =gray, ultra thick, gray] (6.5,4.5) circle [radius=0.6];
\node at (6.5,4.5) {9};
%\draw [fill =lightgray, ultra thick, lightgray] (3.5,3) circle [radius=0.3];
%\node at (3.5,3) {78};
\draw [fill =lightgray, ultra thick, lightgray] (5.5,1.5) circle [radius=0.6];
\node at (5.5,1.5) {136};
\draw [fill =lightgray, ultra thick, lightgray] (5.5,3) circle [radius=0.4];
\node at (5.5,3) {67};
\draw [fill =lightgray, ultra thick, lightgray] (7,2.5) circle [radius=0.3];
\node at (7,2.5) {78};
\draw [fill =lightgray, ultra thick, lightgray] (5.5,7.5) circle [radius=0.6];
\node at (5.5,7.5) {102};
\draw (1,3.2) circle [radius=0.3];
\node at (1,3.2) {88};
\draw [thick] (1.1,2.5) to (1.3,2.6) to (1.3,2.2) to (1.1,2.5);
\draw [thick] (1.3,1.8) to (1.5,1.9) to (1.5,1.5) to (1.3,1.8);
\node at (1.2,2.7) {8};
\node at (1.3,2) {8};
\draw  (1,5.5) circle [radius=0.4];
\node at (1,5.5) {8};
\draw  (2.5,4.8) circle [radius=0.6];
\node at (2.5,4.8) {10};
\draw  (3.2,7) circle [radius=0.3];
\draw [thick] (3.3,5.7) to (3.7,5.9) to (3.5,5.5) to (3.3,5.7);
\draw [thick] (4.2,6.5) to (4.6,6.7) to (4.4,6.3) to (4.2,6.5);
\node at (3.1,5.4) {15};
\node at (4,6.2) {10};
\node at (3.2,7) {15};
\draw  (4.5,4) circle [radius=0.4];
\node at (4.5,4) {2};
\draw  (5.5,6) circle [radius=0.3];
\node at (5.5,6) {45};
\draw  (8,6.5) circle [radius=0.5];
\draw [thick] (8,5.5) to (8.2,5.5) to (8.1,5.1) to (8,5.5);
\draw [thick] (8,4.5) to (8.2,4.5) to (8.1,4.1) to (8,4.5);
\node at (8,6.5) {1};
\node at (8.1,5.7) {2};
\node at (8.1,4.7) {8};
\end{tikzpicture}
\caption{an early stage of a planet wars game, as shown here there are planet categories, the darker grey (red in the game) ones related to the player, the white ones (green in the game) related to the opponent and the neutral planets are coloured by light grey. Fleets presented by triangles and the numbers are the starships included on them.}
\end{figure}


Moreover, the bot's design faces two major problems: the first one \cite{doc1} is that the bot can't store any information about its previous turns like actions it did, actions of its opponent or even the map's state. Since in each turn, the bot meets with an unknown map as it just begins the game for the first time. The second one\cite{doc3} is that the time requires to move(make an action) is just one second. So these difficulties make the bot's design like a great challenge. In this kind of game, everything has a sum of properties\cite{doc1}. Such as, planets have the x and y coordination for their locations in the map, ownersID, number of starship and growth rate. To conquest other planets, the player needs to send fleets for this aim. Each fleet has a playerID parameter, number of starships, source planetID, destination planetID, turn's number need to reach the target. In each simulated turn\cite{doc1}, the player has the ability to send fleets in a battle with other planet's starships with the source planetID and target planetID, while, the player has the ability\cite{doc1} to make just one action per turn. After each move (action) the planets belong to the players\cite{doc5} increase their ship's number according to their growth rate. To make fleets previously sent reach enemies planets its take time of many turns according to the distance between the source planet and the target planet, moreover, if the source and target planet owned by the same player then it considered like a reinforcment\cite{doc1,doc5} by adding the ship's number on the fleet to the number hosted on the target planet. when the fleets reach the target its will make battles with local target ships, otherwise, if the target is a neutral planet, the player must to sends at least one additional ship to own the planet. While, if the target is owned by the enemy the two players will fight until one with the highest starship number owns the planet. When the player sent fleets to reach some goals\cite{doc5}, it can't change their directions. In addition, the player can send more fleet in the next turns even that the first ones do not yet arrive at their destinations. In the end of the match\cite{doc5}, the player with the highest number of starships wins. If a player loses all their starships then the game will end also faster. whilst, the players have the same starship's number at the end of the game there is a draw\cite{doc5}. 
\section{immune system overview}

One of the most inspirational things that computational based to solve their problems\cite{doc7} is the biology and its various concepts. Among the natural concepts, the immune system has emerged as one of the important aspects to design optimisation algorithms. An optimization problem\cite{doc6} is to look for the optimum element from a set of potential solutions. There are many optimization problems in all of the scientific areas. For this purpose, many methods and algorithms have been developed. The most useful algorithms\cite{doc6} are heuristics. They include divers algorithms such as artificial bee colony, firefly swarm optimisation, ant colony optimization, genetic algorithms, just to mention a few. While the Artificial immune system (AIS) is a common algorithm devised by Decastro\cite{doc6} that uses population-based heuristic concept. The mechanisms used in the biological immune system against various types of pathogens made this system more interesting\cite{doc9} for computer researchers to exploit its technics. This kind of algorithms is used to solve many different optimization problems in science and technology areas. However, the immune system is more complex and its application in technologies areas is a challenge, likewise, the biological immune system\cite{doc7} still under wide active research, whilst, the AIS is adopted just for few mechanisms inspired from the human immune system including the clonal selection.
\subsection{natural immune system}
The biological immune system including human system contains cells, molecules, and organs in its structure to defend the body against the diseases. In the aim to make an immune response\cite{doc6}, the system has to distinguish between the body cells as a self-cells and the foreign cells as nonself-cells(antigens). The immune system response is activated by a suitable mechanism\cite{doc6} to defeat the nonself-cells, this mechanism is defined by the type of the antigens, specific antigen implies a specific response and a specific process. In order to make a fast response in case of the similar antigen, the immune system develops memory cells for this purpose.
\subsubsection*{Clonal selection}
One of the important mechanism used to defend against the nonself-cells\cite{doc6} is the clonal selection. This immune response describes the process how the immune system will stimulus against a specific antigen\cite{doc7} by proliferating a specific type of cells that only those can recognize the antigen.\\
When the antigen is inside the body, the immune response\cite{doc6} by giving the B-cells the ability to secrete antibodies. After that, the T-cells give a signal to the B-cells to proliferate and mature to terminal antibodies secreting cells, it's the plasma cells. The proliferation of the B-cells is according to the affinity level, higher affinity implies more clone will be generated, this whole process named affinity maturation.

\begin{figure}
\begin{tabular}{c}
\includegraphics[scale = 0.8]{clonaS}
\end{tabular}
\caption{The biological clonal selection mechanism and its steps in order to defend the body, starting by detecting of the antigen until removing it.}
\end{figure}

The clonal selection process will pass with various steps\cite{doc7}:
\paragraph{•}
The cloned cells undergo to a mutation process.
\paragraph{•}
the self-reactive receptor will be eliminated.
\paragraph{•}
proliferate the mature cells those can detect the antigen.

\subsection{Artificial Immune System}
Inspiring from the biological immune system an algorithm has been developed called Artificial Immune System (AIS)\cite{doc6}. The search technic is similar to the natural immune system by the implication between the fitness function and the affinity maturation in the natural system.
\subsubsection{Initialisation}
A random population N is generated in the search space, as a process that used in the other heuristic algorithms. This population considered like antibodies.
\subsubsection{Clonal proliferation}
In this step, the antibodies will clone (proliferate) according to their fitness(affinity).
\subsubsection{Maturation}
The maturation technic is similar to the mutation one with a mutation probability P. This mutation is applied to equation (1) : 
\begin{equation}
x_{id} = x_{id} + k(x_{d_{max}} - x_{d_{min}}) . N(0,1)
\end{equation}
Where $x_{id}$ represent the dimension d of the antibody i, $x_{max}$ and $x_{min}$ represent the min and the max bounds of the variable i, N(0,1) is the standard distribution and k is the scale factor.
\subsubsection{Evaluation}
In the evaluation step, the fitness function of every antibody is calculated by computing the affinity values.
\subsubsection{Ageing operator}
This factor is used to eliminate the individuals lost more. Indeed, the Ageing operator leads to upgrading the initial population.
\subsubsection{Selection process}
This section will be applied to select N individual to the next generation. 
%\subsection{AIS pseudocode}
%\begin{enumerate}
%\item initialize N individual with random values between 0 and 1.
%\item For iteration = 1 : maxIteration,
%\begin{itemize}
%\item Compute the affinities.
%\item Clone the antibodies.
%\item Mutate the antibodies cloned in the previous step.
%\item Compute the affinities for the new antibodies mutated.
%\item Applied the selection process to select the next generation
%\end{itemize} 
%End For \\
%Display the optimal solutions. \\
%End
%\end{enumerate}
\begin{figure}
\centering
\begin{tikzpicture}[scale = 0.8]
\draw [thick] (4.5,20) circle [radius=0.5];
\node at (4.5,20) {Start};
\draw [->] [thick](4.5,19.5) -- (4.5,19);
\draw (2,19) --(8,19);
\draw (1,18.5) --(7,18.5);
\draw (2,19) --(1,18.5);
\draw (8,19) --(7,18.5);
\node at (4.5,18.7) {AIS parameters};
\draw [->] [thick](4.5,18.5) -- (4.5,18);
\draw (1,18) --(8.5,18);
\draw (1,17.5) --(8.5,17.5);
\draw (1,18) --(1,17.5);
\draw (8.5,18) --(8.5,17.5);
\node at (4.5,17.7) {Random antibodies initialisation};
\draw [->] [thick](4.5,17.5) -- (4.5,17);
\draw (1,17) --(8.5,17);
\draw (1,16.5) --(8.5,16.5);
\draw (1,17) --(1,16.5);
\draw (8.5,17) --(8.5,16.5);
\node at (4.5,16.7) {Initial antibodies evaluation};
\draw [->] [thick](4.5,16.5) -- (4.5,16);
\draw (1,16) --(8.5,16);
\draw (1,15.5) --(8.5,15.5);
\draw (1,15.5) --(1,16);
\draw (8.5,15.5) --(8.5,16);
\node at (4.5,15.7) {Clonal proliferation};
\draw [->][thick] (4.5,15.5) -- (4.5,15);
\draw (1,15) --(8.5,15);
\draw (1,14.5) --(8.5,14.5);
\draw (1,14.5) --(1,15);
\draw (8.5,14.5) --(8.5,15);
\node at (4.5,14.7) {Maturation};
\draw [->][thick] (4.5,14.5) -- (4.5,14);
\draw (1,14) --(8.5,14);
\draw (1,13.5) --(8.5,13.5);
\draw (1,13.5) --(1,14);
\draw (8.5,13.5) --(8.5,14);
\node at (4.5,13.7) {Mutated antibodies evaluation};
\draw [->][thick] (4.5,13.5) -- (4.5,13);
\draw (1,13) --(8.5,13);
\draw (1,12.5) --(8.5,12.5);
\draw (1,12.5) --(1,13);
\draw (8.5,12.5) --(8.5,13);
\node at (4.5,12.7) {best individuals selection};
\draw [->][thick] (4.5,12.5) -- (4.5,12);
\draw (4.5,12) --(2.5,11.5);
\draw (2.5,11.5) --(4.5,11);
\draw (4.5,11) --(6.5,11.5);
\draw (6.5,11.5) --(4.5,12);
\node at (4.5,11.5) {Stopping criterion};
\draw (2.5,11.5) --(0.7,11.5);
\draw (0.7,11.5) --(0.7,17.3);
\node at (4.1,10.7) {Yes};
\node at (2.2,11.8) {No};
\draw [->][thick] (0.7,17.3) -- (4.5,17.3);
\draw [->][thick] (4.5,11) -- (4.5,10.5);
\draw (1.5,10.5) --(7.5,10.5);
\draw (1.5,9.8) --(7.5,9.8);
\draw (1.5,10.5) --(1.5,9.8);
\draw (7.5,10.5) --(7.5,9.8);
\node at (4.5,10.1) {Output optimal solution};
\draw [->][thick](4.5,9.8) -- (4.5,9.3);
\draw [thick](4.5,8.8) circle [radius=0.5];
\node at (4.5,8.8) {End};
\end{tikzpicture}
\caption{The diagram showed the ordered steps for running an AIS algorithm based on clonal selection algorithm (CLONALG) }
\end{figure}

\section{AisBot: the Canquer Bot}

In the previous sections, we explained that there are two primary constraints in the development of the bot's behaviours. The main constraint is the limited time available for the bot to move (1 second). The second fundamental constraint that is no information could be stored from the previous turns. Based on these two major restrictions, the design performance and the implementation possibilities are limited. However, some researchers have been carried out on the memory solutions based on metaheuristic algorithms to make the bot store some information from its previous actions to determine the next move, but most of them are limited by the time factor; the performance of an EA is limited by time, is almost impossible to run an EA in each step of time (1 second). For the bot's behaviour evaluation it is no possible to improve an action without any feedback from one turn to the next. \\
The purpose of this investigation is to obtain data which will help to address those research restrictions, while these data were collected using a set of rules in order to optimize the bot's behaviour. \\
Anyway, in this case of study, we have to perform a single action mode: send starships from a planet to another; to make fleets move in the map, the bot should distinguish between self-planets and the enemy's planets. Based on this simple action, one of the greatest challenges is to determine which planet that will generate the fleets, how many starships will include on it and what is the planet will be targeted. In the next, we will describe our bot's behaviour, following the definition of the parameters used in the optimization. Finally, we will explain the technics governing the bot.




\subsection{AisBot}

\begin{figure*}
\centering
\begin{tikzpicture}[scale = 0.77]
\draw [->][ultra thick](-1,20) -- (3,20);
\draw [->][ultra thick](-1,20) -- (2.8,20);
\node at (1,20.3) {State of game map};
\draw (3,20.5) --(3,19.5);
\draw (3,20.5) --(6,20.5);
\draw (6,20.5) --(6,19.5);
\draw (6,19.5) --(3,19.5);
\draw [->][ultra thick](6,20) -- (8,20);
\node at (4.4,20.3) {\footnotesize locate the bot's};
\node at (4.4,19.8) {\footnotesize best planet: base};
\draw (8,20.5) --(8,19.5);
\draw (8,20.5) --(13,20.5);
\draw (13,20.5) --(13,19.5);
\draw (13,19.5) --(8,19.5);
\draw [->][thick](9.2,21.8) -- (9.2,20.5);
\draw [->][thick](10.5,21.4) -- (10.5,20.5);
\draw [->][thick](11.8,21) -- (11.8,20.5);
\node at (10,20.3) {\footnotesize locate the best};
\node at (9.2,22) {\footnotesize P\_NS};
\node at (10.5,21.6) {\footnotesize P\_GR};
\node at (11.8,21.2) {\footnotesize P\_DIS};
\node at (10.5,19.8) {\footnotesize ennemy planet to attack: target};
\draw [->][ultra thick](13,20) -- (14,20);
\draw (14,20.5) --(14,19.5);
\draw (14,20.5) --(16.5,20.5);
\draw (16.5,20.5) --(16.5,19.5);
\draw (16.5,19.5) --(14,19.5);
\node at (15.3,20.3) {\footnotesize for next};
\node at (15.3,19.8) {\footnotesize colony};
\draw [->][ultra thick](15.5,19.5) -- (15.5,18.5);
\draw (15.5,18.5) --(14.5,18);
\draw (14.5,18) --(15.5,17.5);
\draw (15.5,17.5) --(16.5,18);
\draw (16.5,18) --(15.5,18.5);
\draw [->][thick](17.2,18) -- (16.5,18);
\node at (17.7,18) {\footnotesize P\_tith};
\draw [->][thick](17.2,15.5) -- (16.5,15.5);
\node at (17.7,15.5) {\footnotesize P\_tith};
\node at (15.5,18) {\footnotesize tith ?};
\node at (15.5,15.7) {\footnotesize extra};
\node at (15.5,15.4) {\footnotesize attack};
\draw [->][ultra thick](15.5,17.5) -- (15.5,16);
\node at (15.9,17.2) {\footnotesize No};
\draw (15.5,16) --(14.5,15.5);
\draw (14.5,15.5) --(15.5,15);
\draw (15.5,15) --(16.5,15.5);
\draw (16.5,15.5) --(15.5,16);
\draw [->][ultra thick](14.5,18) -- (13,18);
\node at (13.3,18.3) {\footnotesize Yes};
\draw [ultra thick](15.5,15) -- (15.5,14);
\node at (15.9,14.8) {\footnotesize No};
\draw [ultra thick](15.5,14) -- (5,14);
\draw [->][ultra thick](5,14) -- (5,17);
\draw (13,18.5) --(13,17.5);
\draw (13,17.5) --(10,17.5);
\draw (10,17.5) --(10,18.5);
\draw (10,18.5) --(13,18.5);
\node at (13.3,15.8) {\footnotesize Yes};
\node at (11.3,18.2) {\footnotesize tith from};
\node at (11.4,17.8) {\footnotesize colonie to base};
\node at (8.7,17.5) {\footnotesize tith};
\draw [->][thick](9,17.5) -- (10,17.5);
\draw [->][ultra thick](14.5,15.5) -- (13,15.5);
\node at (9.3,15.8) {\footnotesize Yes};
\draw (13,15.5) --(11.5,16.5);
\draw (11.5,16.5) --(10,15.5);
\draw (10,15.5) --(11.5,14.5);
\draw (11.5,14.5) --(13,15.5);
\node at (11.5,15.7) {\footnotesize colony near};
\node at (11.5,15.2) {\footnotesize to target};
\draw [->][ultra thick](10,15.5) -- (9,15.5);
\draw (9,16.3) --(9,14.8);
\draw (9,14.8) --(6,14.8);
\draw (6,14.8) --(6,16.3);
\draw (6,16.3) --(9,16.3);
\node at (7.5,15.7) {\footnotesize extra attack from};
\node at (7.5,15.3) {\footnotesize colony to base};
\draw [->][thick](7.5,16.6) -- (7.5,16.3);
\node at (7.7,16.8) {\footnotesize extra\_attack};
\draw [->][ultra thick](10,18) -- (6,18);
\draw (6,18) --(5,19);
\draw (5,19) --(4,18);
\draw (4,18) --(5,17);
\draw (5,17) --(6,18);
\node at (5,18.2) {\footnotesize Last};
\node at (5.1,17.8) {\footnotesize colony ?};
\draw [->][ultra thick](5.7,18.3) -- (14,19.5);
\node at (5.9,18.5) {\footnotesize No};
\node at (3.7,18.3) {\footnotesize Yes};
\draw (6,15.5) -- (5.7,15.5);
\draw [->][ultra thick](5.7,15.5) -- (5.7,17.7);
\draw [->][ultra thick](4,18) -- (2,18);
\draw (2,18) -- (0.5,19.5);
\draw (0.5,19.5) -- (-1,18);
\draw (-1,18) -- (0.5,16.5);
\draw (0.5,16.5) -- (2,18);
\node at (0.5,18.5) {\footnotesize Expansion };
\node at (0.5,18) {\footnotesize or };
\node at (0.5,17.5) {\footnotesize conquest ?};
\draw [ultra thick](1,17) -- (1,15.5);
\draw [ultra thick](1,15.5) -- (2.5,15.5);
\node at (1.8,15.7) {\footnotesize conquest};
\draw [->][ultra thick](2.5,15.5) -- (2.5,14.8);
\draw (1,14.8) -- (4,14.8);
\draw (4,14.8) -- (4,13.5);
\draw (4,13.5) -- (1,13.5);
\draw (1,13.5) -- (1,14.8);
\node at (2.5,14.3) {\footnotesize calculate needed};
\node at (2.5,13.9) {\footnotesize fleets to win};
\draw [ultra thick](0,17) -- (0,15.5);
\draw [ultra thick](0,15.5) -- (-1.5,15.5);
\draw [->][ultra thick](-1.5,15.5) -- (-1.5,11);
\draw (-2.5,11) -- (1,11);
\draw (-2.5,9.5) -- (1,9.5);
\draw (-2.5,11) -- (-2.5,9.5);
\draw (1,11) -- (1,9.5);
\draw [ultra thick](2.5,13.5) -- (2.5,12);
\draw [ultra thick](2.5,12) -- (0.5,12);
\node at (-0.8,15.7) {\footnotesize expansion};
\draw [->][ultra thick](0.5,12) -- (0.5,11);
\node at (-0.8,10.4) {\footnotesize sent fleets};
\node at (-0.8,10) {\footnotesize to target palnet};
\draw [->][ultra thick](1,10.3) -- (4.8,10.3);
\draw [->][ultra thick](1,10.3) -- (5,10.3);
\node at (3,10.5) {\footnotesize Next moves of fleets};
\draw [->][thick](2,9.6) -- (1,9.6);
\node at (2.9,9.6) {\footnotesize extra\_attack};
\end{tikzpicture}
\caption{The states that are governing the behaviour of the AisBot including the parameters used on the evaluation of the bot's behaviour. These parameters will improve by the clonal selection algorithm (CLONALG).}
\end{figure*}

%%\includepdf[scale=0.7,pages=1]{botDiagram}


As we mentioned previously, the purpose of this study is to try to optimize the behaviour of a bot during the planet war RTS game. In order to improve our experimentation, we use the AisBot as a conquer bot in this game, and it works as follows: first of all, when a turn is started, the bot tries to determine the base planet based on a score function and the rest of planets are used as colonies. Secondly, the bot decides which planet to attack for the next turn or if it owns additional planet the action will be considered as a reinforcement, in order to reach the target planet, it can take some number of turns. If the bot trying to attack a target is owned by a neutral, the action will be considered as an expansion; however, if it's owned by the enemy, the action will be considered as a conquest. Once the base planet is reinforced by starships coming from colonies, the action will be considered as a Tith. In addition, when colonies that are closed to the target planet than the base is allowed to attack the target by sending fleets, instead of reinforcing the base and this one sends those fleets to the target planet, but move directly to the target. Besides, when a planet was targeted by the bot, it is no possible to decide another attack against the same planet until the first one finished, that is mean, for each fleet sent to perform an attack, it knows the target planet in its data structure. \\





In order to improve the behaviour of the bot,  a set of rules is defined included some parameters classified by weights, probabilities and amounts. the parameters signification is : 
\begin{itemize}
\item \textit{$Tith_{perc}$}: starships proportions that the bot can sends.
\item \textit{$Tith_{prob}$}: Tith probability that a colony sends to the base planet.
\item \textit{$w_{NS}$}: weight of starships number hosted on the planet.
\item \textit{$w_{DIS}$}: weight of distance between the base and the target planet.
\item \textit{$w_{GR}$}: weight of growth rate according to the target planet.
\item \textit{$Pool_{perc}$}: percentage of extra starships can send from the base to the target planet.
\item \textit{$Support_{perc}$}: Percentage of extra starships from the colony to the target.
\item \textit{$Support_{prob}$}: Probability of sending extra starships from the colony to the target.
\end{itemize}
Furthermore, each parameter takes some values during the optimization process depends on it meaning in the game, our conquer bot will be based on these values to make decisions during the game. To determine the target planet the bot will use a score function define as follow:

\begin{equation}
Score(p) = \frac{p.NumStarships.w_{NS-DIS}.Dist(base,p)}{1+p.GrowthRate.w_{GR}}
\end{equation}

Where the $w_{NS-dis}$ and the $w_{GR}$ are weights related successively to starships number, the growth rate for the planet and the distance to reach the target. As we mentioned above the $base$ is the planet which has the highest number of starships and $p$ refer to planet want to evaluate. \\ 

When the Tith and the attack process are performed by the colonies, the base planet also sends starships to attack the target. The number of starships sends to attack is estimated according to the attack mode, if the bot attack mode is expansion where the target does not generate starships during the game that implies the bot will integrate a very specific starships number to be able to defeat the planet target, in the other hand, if the bot attack mode is a conquest, the engine will estimate the number of troops needs to beat the enemy.




\subsection{RandomBot}
The development kit of google for the planet war game include an example of a bot called RandomBot, the behaviour of this bot is very simple and it works independently of any situation (map). Based on it basic behaviour, the bot tries to send fleets randomly and try to perform random attacks without any estimation. If we compare the AisBot and the RandomBot behaviours, we will clearly find that the AisBot's behaviour is more complex than the one on RandomBot, and it be able to defeat it in all situation and maps; however, it needs more turns to beat it; for this purpose, the greatest challenge is to make the AisBot's behaviour quite fast by determining the values of parameters shown in the previous section systematically.


\section{AisBot: an AIS optimization}
The aim of this optimization is to make the bot behave faster and be able to win in less number of turns, in order to do that, an artificial immune system (AIS) algorithm used on the set of rules included the parameters that will determine the behaviour of the bot; when the parameters are improved, they are fixed and will be uploaded by the bot in order to play a real scenario. 
Therefore, the purpose is to determine the parameters values in order to evaluate the bot's behaviour. The AIS proposed in this study use a floating array to represent all parameters defined previously, while, the clonal proliferation process works on a totally new array with a specific proliferation factor for each parameter according to its fitness. The maturation mechanism is applied to the cloned antibodies by mutating the parameters values using the equation (1) with a probability amount to minimize the bad antibodies. \\

The selection process based on an evaluation technic by implementing tournaments where each cloned individual used to compete with the aim of being selected for the next generation from the best results were chosen. The evaluation of an individual is staged by including their parameters for the AisBot's behaviour and placing the bot on a real planet war game against the RandomBot on five maps. \\

The aim of this optimization is to minimize the number of turns needs to win, the best bot is the one that plays fewer turns until win; this kind of ranking bots strongly shown a constraint problem is that each individual was able to win every single game.

\section{Exprementation and results}
With the aim of testing the CLONALG algorithm, the bot placed under several situations and play several games against the RandomBot. The algorithm parameters can be found on the Table 1:
\begin{table}[!h]
\centering
\begin{tabular}{ |c|c| }
\hline
 Number of antibodies & 20 \\ 
 Number of generations & 15 \\  
 maximun antbodies Cloned & 72 \\ 
 \hline   
\end{tabular}
\caption{Parameters used in the CLONALG algorithm}
\label{TABLE 1}
\end{table}


To make a bot under a real game scenario with optimized parameters will take hours, since, to evaluate each individual it took more seconds. The figure (5) showed the evaluation of the number of turns plays by the bot until win, and it appears that the number of turns needs to win in five maps decrease when the evaluation progress. Furthermore, in figure (6) two, the parameters evaluation is shown during the optimization process in amoung fifteen generations. \\

\begin{figure}[!h]
\begin{center}
\begin{tikzpicture}
\begin{axis}[
    title={Turns number evaluation},
    xlabel={Generation},
    ylabel={Turns},
    xmin=0, xmax=16,
    ymin=0, ymax=800,
    xtick={0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15},
    ytick={150,300,450,600,750},
    legend pos=north west,
    ymajorgrids=true,
    grid style=dashed,
]
 
\addplot[
    color=blue,
    mark=square,
    ]
    coordinates {
    (1,598)(2,597)(3,557)(4,624)(5,581)(6,528)(7,585)(8,580)(9,650)(10,538)(11,588)(12,605)(13,569)(14,562)(15,552)
    };
    \legend{turns by generation}
 
\end{axis}
\end{tikzpicture}
\end{center}
\caption{the evaluation of the number of turns plays by the bot until win in 5 maps, and it appears that the number of turns needs to win in five maps decrease when the evaluation progress}
\end{figure}

\begin{figure}
\begin{center}
\begin{tikzpicture}[scale = 0.8]
\begin{axis}[
    title={Turns number evaluation},
    xlabel={Generation},
    ylabel={Turns},
    xmin=0, xmax=16,
    ymin=0, ymax=1,
    xtick={0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15},
    ytick={0.15,0.3,0.45,0.6,0.75,0.9},
    legend pos=outer north east,
    ymajorgrids=true,
    grid style=dashed,
]
 
\addplot[
    color=blue,
    ]
    coordinates{(1,0.651)(2,0.369)(3,0.713)(4,0.427)(5,0.721)(6,0.614)(7,0.34)(8,0.395)(9,0.82)(10,0.216)(11,0.577)(12,0.234)(13,0.7)(14,0.175)(15,0.845)};
    
    \addplot[
    color=red,
    ]
    coordinates{(1,0.651)(2,0.344)(3,0.616)(4,0.79)(5,0.33)(6,0.508)(7,0.649)(8,0.097)(9,0.419)(10,0.85)(11,0.151)(12,0.635)(13,0.646)(14,0.601)(15,0.057)};
    
    \addplot[
    color=green,
    ]
    coordinates{(1,0.665)(2,0.515)(3,0.483)(4,0.13)(5,0.528)(6,0.771)(7,0.755)(8,0.553)(9,0.672)(10,0.978)(11,0.161)(12,0.602)(13,0.186)(14,0.997)(15,0.447)};
    
    \addplot[
    color=purple,
    ]
    coordinates{(1,0.122)(2,0.949)(3,0.603)(4,0.481)(5,0.619)(6,0.817)(7,0.871)(8,0.31)(9,0.552)(10,0.837)(11,0.703)(12,0.41)(13,0.102)(14,0.02)(15,0.323)};
    
    \addplot[
    color=gray,
    ]
    coordinates{(1,0.785)(2,0.425)(3,0.318)(4,0.714)(5,0.975)(6,0.746)(7,0.245)(8,0.439)(9,0.426)(10,0.449)(11,0.912)(12,0.301)(13,0.703)(14,0.138)(15,0.124)};
    
    \addplot[
    color=black,
    ]
    coordinates{(1,0.113)(2,0.029)(3,0.654)(4,0.132)(5,0.144)(6,0.364)(7,0.226)(8,0.379)(9,0.3)(10,0.393)(11,0.336)(12,0.149)(13,0.642)(14,0.054)(15,0.814)};
    
    \addplot[
    color=orange,
    ]
    coordinates{(1,0.64)(2,0.259)(3,0.674)(4,0.127)(5,0.875)(6,0.258)(7,0.067)(8,0.589)(9,0.907)(10,0.166)(11,0.308)(12,0.789)(13,0.587)(14,0.272)(15,0.636)};
    
    \addplot[
    color=brown,
    ]
    coordinates{(1,0.366)(2,0.685)(3,0.046)(4,0.602)(5,0.674)(6,0.212)(7,0.176)(8,0.949)(9,0.86)(10,0.807)(11,0.645)(12,0.361)(13,0.096)(14,0.712)(15,0.32)};
    
    
    \legend{$Tith_{perc}$,$Tith_{prob}$,$W_{NS}$,
    $W_{GR}$,$W_{DIS}$,$Pool_{perc}$,$Support_{perc}$,$Support_{prob}$}
 
\end{axis}
\end{tikzpicture}
\end{center}
\caption{the evaluation of the Parameters during the optimization process}
\end{figure}



Table II describes the evaluated results improved by the optimization process where the colonies have a high probability to send Tith to the base (0.84) by sending a fewer hosted starships which can be explained that the colonies have to deserve there starships to defend it-selves in an emergency. On the other hand, the probability for a planet to perform an attack against other ones is around (0.32) and the proportion of sending troops is elevated (64\%) when there is an attack action. Based on this, when a planet performs an attack, the base also can send a high extra starships number for the attack around 81\%. Finally, when the bot trying to determine the target planet to perform the attack, the most important weights based on is the number of starships hosted on the target and the growth rate related to it, the distance has a less priority in this process. \\

\begin{table}[!h]
\centering
\begin{tabular}{|c|c|c|}
\hline
 & Before & After \\
 \hline
 $Tith_perc$ & 0.959 & 0.057 \\
 \hline
 $Tith_prob$ & 0.651 & 0.845 \\
 \hline
 $W_NS$ & 0.665 & 0.447 \\
 \hline
 $W_GR$ & 0.122 & 0.323 \\
 \hline
 $W_DIS$ & 0.758 & 0.124 \\
 \hline
 $Pool_perc$ & 0.113 & 0.814 \\
 \hline
 $Support_perc$ & 0.64 & 0.636 \\
 \hline
 $Support_perc$ & 0.366 & 0.32 \\
 \hline 
\end{tabular}
\caption{Parameters used in the CLONALG algorithm}
\label{TABLE 2}
\end{table}

\begin{table}[!h]
\centering
\begin{tabular}{|c|c|c|}
\hline
 Maps & Before & After \\ 
 \hline
 5 & 135 & 98 \\ 
 \hline
 10 & 128 & 80 \\
 \hline
 20 & 161 & 70 \\
 \hline
 50 & 102 & 72 \\
 \hline
 100 & 144 & 87 \\
 \hline
\end{tabular}
\caption{results after 5 games of our AisBot with random parameters and after the optimization against the RandomBot}
\label{TABLE 3}
\end{table}

In general, the optimised AisBot is able to defeat the RandomBot in all situations with a minimum number of turns, this can demonstrate that the application of an Evolutionary Algorithm reach some hight capabilities in optimization behaviour even a parametrize behaviour as the one used on the AisBot. There are a lot of challenges can explore all the capabilities of AIS algorithms in the design of the bot's behaviour can offer.


\section{conclusions}
The planet wars game was classified as an RTS game, where the player (bots) fight against others in real-time. The main aim of this study was to investigate the application of the Evolutionary Algorithms (EAs) and the better results can be obtained in real-world problems, by tunning real game scenarios that used a parametrise behaviour of a bot tuning by an AIS Algorithm. This problem showed that the EAs can improve the evaluation of a hand-coded bot by defeating multiple opponents in different situations in fewer turns. In the other hand, the high capabilities of an evolutionary approach can be improved at least in this type of problems.

\bibliography{references}

\addcontentsline{toc}{section}{Bibliography}

\bibliographystyle{abbrv}
%Please number citations consecutively within brackets \cite{b1}. The 
%sentence punctuation follows the bracket \cite{b2}. Refer simply to %the reference 
%number, as in \cite{b3}---do not use ``Ref. \cite{b3}'' or ``reference \cite{b3}'' except at 
%the beginning of a sentence: ``Reference \cite{b3} was the first $\ldots$''

%Number footnotes separately in superscripts. Place the actual footnote at 
%the bottom of the column in which it was cited. Do not put footnotes in the 
%abstract or reference list. Use letters for table footnotes.

%Unless there are six authors or more give all authors' names; do not use 
%``et al.''. Papers that have not been published, even if they have %been 
%submitted for publication, should be cited as ``unpublished'' %%%\cite{b4}. Papers 
%that have been accepted for publication should be cited as ``in press'' \cite{b5}. 
%Capitalize only the first word in a paper title, except for proper %nouns and 
%element symbols.

%For papers published in translation journals, please give the English 
%citation first, followed by the original foreign-language citation \cite{b6}.

%\begin{thebibliography}{00}
%\bibitem{b1} G. Eason, B. Noble, and I. N. Sneddon, ``On certain integrals of Lipschitz-Hankel type involving products of Bessel functions,'' Phil. Trans. Roy. Soc. London, vol. A247, pp. 529--551, April 1955.
%\bibitem{b2} J. Clerk Maxwell, A Treatise on Electricity and Magnetism, 3rd ed., vol. 2. Oxford: Clarendon, 1892, pp.68--73.
%\bibitem{b3} I. S. Jacobs and C. P. Bean, ``Fine particles, thin films and exchange anisotropy,'' in Magnetism, vol. III, G. T. Rado and H. Suhl, Eds. New York: Academic, 1963, pp. 271--350.
%\bibitem{b4} K. Elissa, ``Title of paper if known,'' unpublished.
%\bibitem{b5} R. Nicole, ``Title of paper with only first word capitalized,'' J. Name Stand. Abbrev., in press.
%\bibitem{b6} Y. Yorozu, M. Hirano, K. Oka, and Y. Tagawa, ``Electron spectroscopy studies on magneto-optical media and plastic substrate interface,'' IEEE Transl. J. Magn. Japan, vol. 2, pp. 740--741, August 1987 [Digests 9th Annual Conf. Magnetics Japan, p. 301, 1982].
%\bibitem{b7} M. Young, The Technical Writer's Handbook. Mill Valley, CA: University Science, 1989.
%\end{thebibliography}

\end{document}
